[TOC]

# 项目架构

![Snipaste_2022-12-02_19-54-10](assets/Snipaste_2022-12-02_19-54-10.png)

实时核心：Flink

离线核心：Spark

```properties
实时数仓分层:
	计算框架:Flink;存储框架:消息队列(可以实时读取&可以实时写入)
	ODS:Kafka
		使用场景:每过来一条数据,读取到并加工处理
	DIM:HBase
		使用场景:事实表会根据主键获取一行维表数据(1.永久存储、2.根据主键查询)	   
		Kafka:不能长期存储，有一些比较重要的用户信息需要长期存储的做不到,并且不提供根据主键的查询     ×
		HBase:海量数据永久存储,根据主键快速查询          √
		Redis:用户表数据量大,内存数据库                 ×
		ClickHouse:并发不行,列存                       ×
		ES:默认给所有字段创建索引                       ×
		Hive(HDFS):效率低下                            ×
		Mysql本身:压力太大,实在要用就使用从库            √
	DWD:Kafka
		使用场景:每过来一条数据,读取到并分组累加处理
	DWS:ClickHouse
		使用场景:每过来一条数据,读取到并重新分组、累加处理
	ADS:不落盘,实质上是接口模块中查询ClickHouse的SQL语句
		使用场景:读取最终结果数据展示
```

# 集群配置

| 集群             | Flink01(6G+60GB) | Flink02(4G+60GB) | Flink02(4G+60GB) |
| ---------------- | ---------------- | ---------------- | ---------------- |
| Hadoop           | √                | √                | √                |
| Zookeeper        | √                | √                | √                |
| Kafka            | √                | √                | √                |
| Flume            | √(日志服务器)    | √(日志服务器)    | √(业务服务器)    |
| Maxwell          | √                |                  |                  |
| DataX            |                  | √                |                  |
| MySQL            |                  | √                |                  |
| SparkSQL         |                  |                  | √                |
| Hbase            | √                | √                | √                |
| Flink            | √                | √                | √                |
| Clickhouse       |                  |                  |                  |
| Redis            |                  |                  |                  |
| DolphinScheduler |                  |                  |                  |

